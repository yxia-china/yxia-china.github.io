<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³• | Hexo</title>
  <meta name="keywords" content="">
  <meta name="description" content="52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³• | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="åŸºäºç°æœ‰è™šæ‹Ÿæœºç£ç›˜ä¸ºæ¨¡ç‰ˆåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºä½¿ç”¨ virt-install åˆ›å»ºè™šæ‹Ÿæœºâ€¢ è™½ç„¶ä½¿ç”¨virt-manager å¯ä»¥æ–¹ä¾¿çš„ç®¡ç†è™šæ‹Ÿæœº,ä½†å¦‚æœéœ€è¦æ‰¹é‡è¿›è¡Œè™šæ‹Ÿæœºçš„åˆ›å»ºç®¡ç†,å‘½ä»¤è¡Œå·¥å…·virtinstallæ›´åŠ æ–¹ä¾¿å’Œé€‚åˆæ¡ˆä¾‹ï¼šåˆ©ç”¨ qemu-imgå‘½ä»¤åˆ›å»ºè™šæ‹Ÿç£ç›˜#æ³¨æ„: qemu-img create ä¸€å®šè¦ç¡®è®¤å¯¹åº”è·¯å¾„ä¸‹æ²¡æœ‰æ­¤æ–‡ä»¶,å¦‚æœå­˜åœ¨å°†è¦†ç›–åŸæ–‡ä»¶  ç¡®è®¤ç°æœ‰çš„è™šæ‹Ÿç£ç›˜æ–‡ä»¶[root@u">
<meta property="og:type" content="article">
<meta property="og:title" content="42-KVMè™šæ‹ŸåŒ–-åŸºäºç°æœ‰è™šæ‹Ÿæœºç£ç›˜ä¸ºæ¨¡ç‰ˆåˆ›å»ºæ–°çš„è™šæ‹Ÿæœº">
<meta property="og:url" content="http://example.com/2023/05/14/42-KVM%E8%99%9A%E6%8B%9F%E5%8C%96-%E5%9F%BA%E4%BA%8E%E7%8E%B0%E6%9C%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E4%B8%BA%E6%A8%A1%E7%89%88%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="åŸºäºç°æœ‰è™šæ‹Ÿæœºç£ç›˜ä¸ºæ¨¡ç‰ˆåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºä½¿ç”¨ virt-install åˆ›å»ºè™šæ‹Ÿæœºâ€¢ è™½ç„¶ä½¿ç”¨virt-manager å¯ä»¥æ–¹ä¾¿çš„ç®¡ç†è™šæ‹Ÿæœº,ä½†å¦‚æœéœ€è¦æ‰¹é‡è¿›è¡Œè™šæ‹Ÿæœºçš„åˆ›å»ºç®¡ç†,å‘½ä»¤è¡Œå·¥å…·virtinstallæ›´åŠ æ–¹ä¾¿å’Œé€‚åˆæ¡ˆä¾‹ï¼šåˆ©ç”¨ qemu-imgå‘½ä»¤åˆ›å»ºè™šæ‹Ÿç£ç›˜#æ³¨æ„: qemu-img create ä¸€å®šè¦ç¡®è®¤å¯¹åº”è·¯å¾„ä¸‹æ²¡æœ‰æ­¤æ–‡ä»¶,å¦‚æœå­˜åœ¨å°†è¦†ç›–åŸæ–‡ä»¶  ç¡®è®¤ç°æœ‰çš„è™šæ‹Ÿç£ç›˜æ–‡ä»¶[root@u">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/092d6b54082e04ec1c20121058c692bc5844b5.png">
<meta property="og:image" content="http://example.com/img/f8bada3025892d742fe1746c42ead86f562ddc.png">
<meta property="article:published_time" content="2023-05-14T08:21:34.888Z">
<meta property="article:modified_time" content="2023-05-14T08:23:40.552Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/092d6b54082e04ec1c20121058c692bc5844b5.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>John Doe</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="facebook"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-facebook"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="instagram"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-instagram"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="reddit"
               href="https://www.reddit.com/user/yelog/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-reddit"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="weibo"
               href="http://weibo.com/u/2307534817"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-weibo"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="jianshu"
               href="https://www.jianshu.com/u/ff56736de7cf"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-jianshu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/jaytp/activities"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="oschina"
               href="https://my.oschina.net/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-oschina"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:jaytp@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=872336115&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=88151013"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(36)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="SRE linuxäº‘è®¡ç®—">
                        
                        SRE linuxäº‘è®¡ç®—
                        <small>(11)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="äº‘åŸç”Ÿ">
                        
                        äº‘åŸç”Ÿ
                        <small>(10)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="PMPç®¡ç†">
                        
                        PMPç®¡ç†
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Python çˆ¬è™«">
                        
                        Python çˆ¬è™«
                        <small>(14)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="36">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/14/42-KVM%E8%99%9A%E6%8B%9F%E5%8C%96-%E5%9F%BA%E4%BA%8E%E7%8E%B0%E6%9C%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E4%B8%BA%E6%A8%A1%E7%89%88%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="42-KVMè™šæ‹ŸåŒ–-åŸºäºç°æœ‰è™šæ‹Ÿæœºç£ç›˜ä¸ºæ¨¡ç‰ˆåˆ›å»ºæ–°çš„è™šæ‹Ÿæœº">42-KVMè™šæ‹ŸåŒ–-åŸºäºç°æœ‰è™šæ‹Ÿæœºç£ç›˜ä¸ºæ¨¡ç‰ˆåˆ›å»ºæ–°çš„è™šæ‹Ÿæœº</span>
            <span class="post-date" title="2023-05-14 16:21:34">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%B8%89%E7%AB%A0-2-requests%20%E8%BF%9B%E9%98%B6%E2%80%A2%20%E7%88%AC%E5%8F%96%E6%9F%90%E8%A7%86%E9%A2%91%E7%BD%91%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -2-requests è¿›é˜¶â€¢ çˆ¬å–æŸè§†é¢‘ç½‘ç›¸å…³è§†é¢‘">Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -2-requests è¿›é˜¶â€¢ çˆ¬å–æŸè§†é¢‘ç½‘ç›¸å…³è§†é¢‘</span>
            <span class="post-date" title="2023-05-14 16:20:20">2023/05/14</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/14/44-KVM%E8%99%9A%E6%8B%9F%E5%8C%96-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E5%92%8C%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="44-KVMè™šæ‹ŸåŒ–-å­˜å‚¨ç®¡ç†å’Œç£ç›˜æ‰©å®¹">44-KVMè™šæ‹ŸåŒ–-å­˜å‚¨ç®¡ç†å’Œç£ç›˜æ‰©å®¹</span>
            <span class="post-date" title="2023-05-14 16:18:30">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%B8%89%E7%AB%A0-3-%E5%88%A9%E7%94%A8re%E6%A8%A1%E5%9D%97%E7%88%AC%E5%8F%96%E6%9F%90%E7%BD%91%E7%94%B5%E5%BD%B1%E6%8E%92%E8%A1%8C%E6%A6%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -3-åˆ©ç”¨reæ¨¡å—çˆ¬å–æŸç½‘ç”µå½±æ’è¡Œæ¦œ">Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -3-åˆ©ç”¨reæ¨¡å—çˆ¬å–æŸç½‘ç”µå½±æ’è¡Œæ¦œ</span>
            <span class="post-date" title="2023-05-14 16:16:51">2023/05/14</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/14/46-Docker-Container%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E5%90%84%E7%A7%8D%E6%93%8D%E4%BD%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="46-Docker-Containerå®¹å™¨ç®¡ç†å„ç§æ“ä½œ">46-Docker-Containerå®¹å™¨ç®¡ç†å„ç§æ“ä½œ</span>
            <span class="post-date" title="2023-05-14 16:14:04">2023/05/14</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/14/47-Docker-Dockerfile%E9%95%9C%E5%83%8F%E5%88%9B%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="47-Docker-Dockerfileé•œåƒåˆ›å»ºè‡ªåŠ¨åŒ–ç”Ÿäº§æ¡ˆä¾‹">47-Docker-Dockerfileé•œåƒåˆ›å»ºè‡ªåŠ¨åŒ–ç”Ÿäº§æ¡ˆä¾‹</span>
            <span class="post-date" title="2023-05-14 16:09:19">2023/05/14</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/14/48-Docker-%E5%A4%9A%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E5%8F%8A%E6%8C%81%E4%B9%85%E5%8C%96/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="48-Docker-å¤šå®¹å™¨æ•°æ®å…±äº«åŠæŒä¹…åŒ–">48-Docker-å¤šå®¹å™¨æ•°æ®å…±äº«åŠæŒä¹…åŒ–</span>
            <span class="post-date" title="2023-05-14 16:06:48">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%B8%89%E7%AB%A0-4-%E5%88%A9%E7%94%A8BeautifulSoup%E6%A8%A1%E5%9D%97%E7%88%AC%E5%8F%96%E6%9F%90%E7%BD%91%E5%A3%81%E7%BA%B8%E5%9B%BE%E5%BA%93%E5%9B%BE%E7%89%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -4-åˆ©ç”¨BeautifulSoupæ¨¡å—çˆ¬å–æŸç½‘å£çº¸å›¾åº“å›¾ç‰‡">Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -4-åˆ©ç”¨BeautifulSoupæ¨¡å—çˆ¬å–æŸç½‘å£çº¸å›¾åº“å›¾ç‰‡</span>
            <span class="post-date" title="2023-05-14 16:05:34">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%B8%89%E7%AB%A0-5-%E5%88%A9%E7%94%A8xpath%E7%88%AC%E5%8F%96%E6%9F%90%E5%85%AB%E6%88%92%E7%BD%91%E7%9B%B8%E5%85%B3%E8%AF%8D%E8%AF%AD%E5%85%AC%E5%8F%B8%E7%9A%84%E4%BF%A1%E6%81%AF%E5%92%8C%E4%BB%B7%E6%A0%BC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -5-åˆ©ç”¨xpathçˆ¬å–æŸå…«æˆ’ç½‘ç›¸å…³è¯è¯­å…¬å¸çš„ä¿¡æ¯å’Œä»·æ ¼">Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -5-åˆ©ç”¨xpathçˆ¬å–æŸå…«æˆ’ç½‘ç›¸å…³è¯è¯­å…¬å¸çš„ä¿¡æ¯å’Œä»·æ ¼</span>
            <span class="post-date" title="2023-05-14 16:04:16">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%B8%89%E7%AB%A0-6-%E6%8A%93%E5%8F%96%E6%9F%90%E4%BA%91%E9%9F%B3%E4%B9%90%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -6-æŠ“å–æŸäº‘éŸ³ä¹è¯„è®ºæ•°æ®">Pythonçˆ¬è™«-ç¬¬ä¸‰ç« -6-æŠ“å–æŸäº‘éŸ³ä¹è¯„è®ºæ•°æ®</span>
            <span class="post-date" title="2023-05-14 16:03:15">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-1-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91%E7%88%AC%E5%8F%96%E2%85%A0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â… ">Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â… </span>
            <span class="post-date" title="2023-05-14 16:01:27">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-1-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91%E7%88%AC%E5%8F%96%E2%85%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â…¡">Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â…¡</span>
            <span class="post-date" title="2023-05-14 16:00:37">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-1-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91%E7%88%AC%E5%8F%96%E2%85%A2-%E7%88%AC%E5%8F%96%E6%9F%90%E8%8F%9C%E5%B8%82%E5%9C%BA%E6%89%B9%E5%8F%91%E4%BB%B7%E6%95%B0%E6%8D%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â…¢-çˆ¬å–æŸèœå¸‚åœºæ‰¹å‘ä»·æ•°æ®">Pythonçˆ¬è™«-ç¬¬å››ç« -1-å¤šçº¿ç¨‹å¤šè¿›ç¨‹å¹¶å‘çˆ¬å–â…¢-çˆ¬å–æŸèœå¸‚åœºæ‰¹å‘ä»·æ•°æ®</span>
            <span class="post-date" title="2023-05-14 15:59:35">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-2-%E5%8D%8F%E7%A8%8B%E4%B8%8E%E5%BC%82%E6%AD%A5/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -2-åç¨‹ä¸å¼‚æ­¥">Pythonçˆ¬è™«-ç¬¬å››ç« -2-åç¨‹ä¸å¼‚æ­¥</span>
            <span class="post-date" title="2023-05-14 15:58:20">2023/05/14</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/14/52-HAProxy-10%E7%A7%8D%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•">52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•</span>
            <span class="post-date" title="2023-05-14 15:56:12">2023/05/14</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/14/55-Redis-%E7%BC%96%E8%AF%91%E9%83%A8%E7%BD%B2%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="55-Redis-ç¼–è¯‘éƒ¨ç½²åŠæ•°æ®æŒä¹…åŒ–">55-Redis-ç¼–è¯‘éƒ¨ç½²åŠæ•°æ®æŒä¹…åŒ–</span>
            <span class="post-date" title="2023-05-14 15:54:02">2023/05/14</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/14/56-Redis%E9%9B%86%E7%BE%A4-%E5%93%A8%E5%85%B5Sentinel%E6%90%AD%E5%BB%BA%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%AB%98%E5%8F%AF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="56-Redisé›†ç¾¤-å“¨å…µSentinelæ­å»ºå®ç°è´Ÿè½½å‡è¡¡é«˜å¯ç”¨">56-Redisé›†ç¾¤-å“¨å…µSentinelæ­å»ºå®ç°è´Ÿè½½å‡è¡¡é«˜å¯ç”¨</span>
            <span class="post-date" title="2023-05-14 15:41:50">2023/05/14</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/14/998-%E6%90%AD%E5%BB%BA%E4%B8%80%E5%8F%B0%E7%A7%81%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A8%E8%BF%87%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="998-æ­å»ºä¸€å°ç§ç”¨æœåŠ¡å™¨å…¨è¿‡ç¨‹">998-æ­å»ºä¸€å°ç§ç”¨æœåŠ¡å™¨å…¨è¿‡ç¨‹</span>
            <span class="post-date" title="2023-05-14 15:36:20">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/%20Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-3-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%8F%90%E5%8D%87%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E6%95%88%E7%8E%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -3-å¤šçº¿ç¨‹å¤šè¿›ç¨‹æå‡ä»»åŠ¡æ‰§è¡Œæ•ˆç‡">Pythonçˆ¬è™«-ç¬¬å››ç« -3-å¤šçº¿ç¨‹å¤šè¿›ç¨‹æå‡ä»»åŠ¡æ‰§è¡Œæ•ˆç‡</span>
            <span class="post-date" title="2023-05-14 15:35:16">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/14/%20Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-4-%E5%88%A9%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%92%8C%E8%BF%9B%E7%A8%8B%E6%B1%A0%E9%AB%98%E6%95%88%E7%88%AC%E5%8F%96%E5%8C%97%E4%BA%AC%E6%9F%90%E5%8F%91%E8%8F%9C%E5%9C%B0%E6%95%B0%E6%8D%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -4-åˆ©ç”¨çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± é«˜æ•ˆçˆ¬å–åŒ—äº¬æŸå‘èœåœ°æ•°æ®">Pythonçˆ¬è™«-ç¬¬å››ç« -4-åˆ©ç”¨çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± é«˜æ•ˆçˆ¬å–åŒ—äº¬æŸå‘èœåœ°æ•°æ®</span>
            <span class="post-date" title="2023-05-14 15:34:07">2023/05/14</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/13/%20Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E5%9B%9B%E7%AB%A0-5-%E9%AB%98%E6%95%88%E6%8A%93%E5%8F%96%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E8%A7%86%E9%A2%91%E8%B5%84%E6%BA%90%E8%87%B3%E6%9C%AC%E5%9C%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬å››ç« -5-é«˜æ•ˆæŠ“å–è§†é¢‘ç½‘ç«™è§†é¢‘èµ„æºè‡³æœ¬åœ°">Pythonçˆ¬è™«-ç¬¬å››ç« -5-é«˜æ•ˆæŠ“å–è§†é¢‘ç½‘ç«™è§†é¢‘èµ„æºè‡³æœ¬åœ°</span>
            <span class="post-date" title="2023-05-13 20:13:14">2023/05/13</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/13/%20Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%BA%94%E7%AB%A0-1-%E8%B6%85%E7%BA%A7%E9%B9%B0%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99%E8%AF%86%E5%88%AB%E7%A0%81%E5%B9%B6%E7%99%BB%E5%BD%9512306%E7%BD%91%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬äº”ç« -1-è¶…çº§é¹°æ’ä»¶å®ç°è‡ªåŠ¨å¡«å†™è¯†åˆ«ç å¹¶ç™»å½•12306ç½‘ç«™">Pythonçˆ¬è™«-ç¬¬äº”ç« -1-è¶…çº§é¹°æ’ä»¶å®ç°è‡ªåŠ¨å¡«å†™è¯†åˆ«ç å¹¶ç™»å½•12306ç½‘ç«™</span>
            <span class="post-date" title="2023-05-13 19:54:30">2023/05/13</span>
        </a>
        
        
        <a  class="All Python çˆ¬è™« "
           href="/2023/05/13/Python%E7%88%AC%E8%99%AB-%E7%AC%AC%E4%BA%94%E7%AB%A0-2-%E7%88%AC%E5%8F%96%E6%9F%90%E7%BD%91%E7%AB%99%E5%9B%BE%E5%BA%93/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Pythonçˆ¬è™«-ç¬¬äº”ç« -2-çˆ¬å–æŸç½‘ç«™å›¾åº“">Pythonçˆ¬è™«-ç¬¬äº”ç« -2-çˆ¬å–æŸç½‘ç«™å›¾åº“</span>
            <span class="post-date" title="2023-05-13 19:52:47">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/66-CICD%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%B7%A5%E5%85%B7-Jenkins%E5%A3%B0%E6%98%8E%E5%BC%8FPipeline%E9%83%A8%E7%BD%B2JAVA%E7%A8%8B%E5%BA%8F%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B(%E5%8C%85%E5%90%ABDocker%E6%A1%88%E4%BE%8B)/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="66-CICDæŒç»­é›†æˆå·¥å…·-Jenkinså£°æ˜å¼Pipelineéƒ¨ç½²JAVAç¨‹åºç”Ÿäº§æ¡ˆä¾‹(åŒ…å«Dockeræ¡ˆä¾‹)">66-CICDæŒç»­é›†æˆå·¥å…·-Jenkinså£°æ˜å¼Pipelineéƒ¨ç½²JAVAç¨‹åºç”Ÿäº§æ¡ˆä¾‹(åŒ…å«Dockeræ¡ˆä¾‹)</span>
            <span class="post-date" title="2023-05-13 19:49:20">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/997-%E6%89%A9%E5%B1%95KVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%80%BB%E8%BE%91%E5%8D%B7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="67-æ—¥å¿—åˆ†æç³»ç»ŸELK-ELKæ¶æ„ç®€è¿°">67-æ—¥å¿—åˆ†æç³»ç»ŸELK-ELKæ¶æ„ç®€è¿°</span>
            <span class="post-date" title="2023-05-13 19:47:57">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/67-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9FELK-ELK%E6%9E%B6%E6%9E%84%E7%AE%80%E8%BF%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="67-æ—¥å¿—åˆ†æç³»ç»ŸELK-ELKæ¶æ„ç®€è¿°">67-æ—¥å¿—åˆ†æç³»ç»ŸELK-ELKæ¶æ„ç®€è¿°</span>
            <span class="post-date" title="2023-05-13 19:46:06">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/68-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9FELK-Elasticsearch%E5%8D%95%E7%82%B9%E9%83%A8%E7%BD%B2%E5%92%8C%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96%EF%BC%88%E5%90%AB%E5%9F%BA%E4%BA%8EDocker%E5%8D%95%E7%82%B9%E9%83%A8%E7%BD%B2%E6%A1%88%E4%BE%8B%EF%BC%89/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="68-æ—¥å¿—åˆ†æç³»ç»ŸELK-Elasticsearchå•ç‚¹éƒ¨ç½²å’Œé…ç½®ä¼˜åŒ–ï¼ˆå«åŸºäºDockerå•ç‚¹éƒ¨ç½²æ¡ˆä¾‹ï¼‰">68-æ—¥å¿—åˆ†æç³»ç»ŸELK-Elasticsearchå•ç‚¹éƒ¨ç½²å’Œé…ç½®ä¼˜åŒ–ï¼ˆå«åŸºäºDockerå•ç‚¹éƒ¨ç½²æ¡ˆä¾‹ï¼‰</span>
            <span class="post-date" title="2023-05-13 19:44:06">2023/05/13</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/13/78-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Kubernetes%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9%E6%A8%AA%E5%90%91%E4%BC%B8%E7%BC%A9%E5%8F%8A%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="78-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Kubernetesé›†ç¾¤èŠ‚ç‚¹æ¨ªå‘ä¼¸ç¼©åŠæ ¸å¿ƒç»„ä»¶ç‰ˆæœ¬å‡çº§">78-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Kubernetesé›†ç¾¤èŠ‚ç‚¹æ¨ªå‘ä¼¸ç¼©åŠæ ¸å¿ƒç»„ä»¶ç‰ˆæœ¬å‡çº§</span>
            <span class="post-date" title="2023-05-13 17:37:37">2023/05/13</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/13/79-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Kubectl%E5%91%BD%E4%BB%A4%E4%BB%A5%E5%8F%8AEtcd%E5%9F%BA%E4%BA%8E%E5%BF%AB%E7%85%A7%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="79-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Kubectlå‘½ä»¤ä»¥åŠEtcdåŸºäºå¿«ç…§çš„æ•°æ®å¤‡ä»½ä¸æ¢å¤">79-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Kubectlå‘½ä»¤ä»¥åŠEtcdåŸºäºå¿«ç…§çš„æ•°æ®å¤‡ä»½ä¸æ¢å¤</span>
            <span class="post-date" title="2023-05-13 17:34:14">2023/05/13</span>
        </a>
        
        
        <a  class="All PMPç®¡ç† "
           href="/2023/05/13/%E9%A2%84%E6%B5%8B%E5%9E%8B%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86-6-%E9%A1%B9%E7%9B%AE%E8%BF%9B%E5%BA%A6%E7%AE%A1%E7%90%86%E2%85%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="é¢„æµ‹å‹é¡¹ç›®ç®¡ç†-6-é¡¹ç›®è¿›åº¦ç®¡ç†â…¡">é¢„æµ‹å‹é¡¹ç›®ç®¡ç†-6-é¡¹ç›®è¿›åº¦ç®¡ç†â…¡</span>
            <span class="post-date" title="2023-05-13 17:32:31">2023/05/13</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/13/84-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8Enerdctl%20+%20buildkitd%E6%9E%84%E5%BB%BA%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F20230513/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="84-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-åŸºäºnerdctl + buildkitdæ„å»ºå®¹å™¨é•œåƒ">84-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-åŸºäºnerdctl + buildkitdæ„å»ºå®¹å™¨é•œåƒ</span>
            <span class="post-date" title="2023-05-13 17:22:54">2023/05/13</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/13/86-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Zookeeper%E9%9B%86%E7%BE%A4%E5%8F%8A%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E5%92%8C%E5%8F%91%E7%8E%B0%E4%B8%9A%E5%8A%A1%E5%AE%B9%E5%99%A8%E5%8C%96%E6%A1%88%E4%BE%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="86-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Zookeeperé›†ç¾¤åŠå¾®æœåŠ¡åŠ¨æ€æ³¨å†Œå’Œå‘ç°ä¸šåŠ¡å®¹å™¨åŒ–æ¡ˆä¾‹">86-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Zookeeperé›†ç¾¤åŠå¾®æœåŠ¡åŠ¨æ€æ³¨å†Œå’Œå‘ç°ä¸šåŠ¡å®¹å™¨åŒ–æ¡ˆä¾‹</span>
            <span class="post-date" title="2023-05-13 17:13:23">2023/05/13</span>
        </a>
        
        
        <a  class="All äº‘åŸç”Ÿ "
           href="/2023/05/13/87-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-Redis%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E4%B8%9A%E5%8A%A1%E5%AE%B9%E5%99%A8%E5%8C%96%E6%A1%88%E4%BE%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="87-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Rediså•æœºå’Œé›†ç¾¤ä¸šåŠ¡å®¹å™¨åŒ–æ¡ˆä¾‹">87-äº‘åŸç”Ÿæ“ä½œç³»ç»Ÿ-Rediså•æœºå’Œé›†ç¾¤ä¸šåŠ¡å®¹å™¨åŒ–æ¡ˆä¾‹</span>
            <span class="post-date" title="2023-05-13 17:08:49">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/997-%E4%BD%BF%E7%94%A8ChatGPT%E5%81%9A%E8%BF%90%E7%BB%B4%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="997-ä½¿ç”¨ChatGPTåšè¿ç»´åº”ç”¨å·¥å…·å¸¸è§é—®é¢˜è§£ç­”">997-ä½¿ç”¨ChatGPTåšè¿ç»´åº”ç”¨å·¥å…·å¸¸è§é—®é¢˜è§£ç­”</span>
            <span class="post-date" title="2023-05-13 15:49:52">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/%E5%A4%A7%E5%9E%8B%E4%BA%92%E8%81%94%E7%BD%91%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E5%9B%BE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å¤§å‹äº’è”ç½‘å¾®æœåŠ¡æ¶æ„å›¾">å¤§å‹äº’è”ç½‘å¾®æœåŠ¡æ¶æ„å›¾</span>
            <span class="post-date" title="2023-05-13 15:47:16">2023/05/13</span>
        </a>
        
        
        <a  class="All SRE linuxäº‘è®¡ç®— "
           href="/2023/05/13/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E5%9B%BE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="äº‘è®¡ç®—æ¶æ„å›¾">äº‘è®¡ç®—æ¶æ„å›¾</span>
            <span class="post-date" title="2023-05-13 15:24:25">2023/05/13</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">52-HAProxy-10ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="SRE linuxäº‘è®¡ç®—">SRE linuxäº‘è®¡ç®—</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2023-05-14 15:57:57'>2023-05-14 15:56</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#name"><span class="toc-text">name</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#be-id-be-name-srv-id-srv-name-srv-addr-srv-op-state-srv-admin-state-srv-uweight-srv-iweight-srv-time-since-last-change-srv-check-status-srv-check-result-srv-check-health-srv-check-state-srv-agent-state-bk-f-forced-id-srv-f-forced-id-srv-fqdn-srv-port-srvrecord-srv-use-ssl-srv-check-port-srv-check-addr-srv-agent-addr-srv-agent-port"><span class="toc-text">be_id be_name srv_id srv_name srv_addr srv_op_state srv_admin_state srv_uweight srv_iweight srv_time_since_last_change srv_check_status srv_check_result srv_check_health srv_check_state srv_agent_state bk_f_forced_id srv_f_forced_id srv_fqdn srv_port srvrecord srv_use_ssl srv_check_port srv_check_addr srv_agent_addr srv_agent_port</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bind-192-168-10-200-80"><span class="toc-text">bind 192.168.10.200:80</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#use-backend-www-mooreyxia-org-servers"><span class="toc-text">use_backend www.mooreyxia.org_servers</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#server-web01-10-0-0-202-80-check-inter-3000-fall-3-rise-5"><span class="toc-text">server web01 10.0.0.202:80 check inter 3000 fall 3 rise 5</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#server-web02-10-0-0-203-80-check-inter-3000-fall-3-rise-5"><span class="toc-text">server web02 10.0.0.203:80 check inter 3000 fall 3 rise 5</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>HAProxy è°ƒåº¦ç®—æ³•<br>åœ¨LVSå…³äºè´Ÿè½½å‡è¡¡çš„åç§è°ƒåº¦ç®—æ³•ä¸­,åˆ†ä¸ºé™æ€è°ƒåº¦ç®—æ³•å’ŒåŠ¨æ€è°ƒåº¦ç®—æ³•ä¸¤ç§ï¼Œé™æ€è°ƒåº¦æ˜¯æŒ‡æ— è§†åç«¯æœåŠ¡è´Ÿè½½æƒ…å†µæ‰§è¡Œè°ƒåº¦å‘½ä»¤ï¼Œè€ŒåŠ¨æ€è°ƒåº¦ç®—æ³•æ˜¯æ ¹æ®åç«¯çš„åŠ¨æ€å˜åŒ–è´Ÿè½½æƒé‡å»æ‰§è¡Œè°ƒåº¦å‘½ä»¤ã€‚è¿™ç§ç±»ä¼¼çš„ç”¨æ³•åœ¨haproxyä¸­ä¹Ÿå­˜åœ¨ã€‚<br>HAProxyé€šè¿‡å›ºå®šå‚æ•° balance æŒ‡æ˜å¯¹åç«¯æœåŠ¡å™¨çš„è°ƒåº¦ç®—æ³•ï¼Œè¯¥å‚æ•°å¯ä»¥é…ç½®åœ¨listenæˆ–backendé€‰é¡¹ä¸­ã€‚<br>HAProxyçš„è°ƒåº¦ç®—æ³•åˆ†ä¸ºé™æ€å’ŒåŠ¨æ€è°ƒåº¦ç®—æ³•ï¼Œä½†æ˜¯æœ‰äº›ç®—æ³•å¯ä»¥æ ¹æ®å‚æ•°åœ¨é™æ€å’ŒåŠ¨æ€ç®—æ³•ä¸­ç›¸äº’è½¬æ¢ã€‚<br>å®˜æ–¹æ–‡æ¡£ï¼šâ€‹â€‹<a target="_blank" rel="noopener" href="http://cbonte.github.io/haproxy-dconv/2.4/configuration.html#4-balance%E2%80%8B%E2%80%8B">http://cbonte.github.io/haproxy-dconv/2.4/configuration.html#4-balanceâ€‹â€‹</a><br>é™æ€ç®—æ³•ï¼š<br>â€¢ æŒ‰ç…§äº‹å…ˆå®šä¹‰å¥½çš„è§„åˆ™è½®è¯¢è¿›è¡Œè°ƒåº¦ï¼Œä¸å…³å¿ƒåç«¯æœåŠ¡å™¨çš„å½“å‰è´Ÿè½½ã€è¿æ¥æ•°å’Œå“åº”é€Ÿåº¦ç­‰ï¼Œä¸”æ— æ³•å®æ—¶åŠ¨æ€ä¿®æ”¹æƒé‡(åªèƒ½ä¸º0å’Œ1,ä¸æ”¯æŒå…¶å®ƒå€¼)æˆ–è€…ä¿®æ”¹åä¸ç”Ÿæ•ˆï¼Œå¦‚æœéœ€è¦ä¿®æ”¹åªèƒ½é é‡å¯HAProxyç”Ÿæ•ˆã€‚<br>Socat å·¥å…· - æœ‰åˆ©äºå®ç°è„šæœ¬è‡ªåŠ¨åŒ–ç®¡ç†<br>â€¢ å¯¹æœåŠ¡å™¨åŠ¨æ€æƒé‡å’Œå…¶å®ƒçŠ¶æ€å¯ä»¥åˆ©ç”¨ socatå·¥å…·è¿›è¡Œè°ƒæ•´ï¼ŒSocat æ˜¯ Linux ä¸‹çš„ä¸€ä¸ªå¤šåŠŸèƒ½çš„ç½‘ç»œå·¥å…·ï¼Œåå­—æ¥ç”±æ˜¯Socket CATï¼Œç›¸å½“äºnetCATçš„å¢å¼ºç‰ˆ.Socat çš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯åœ¨ä¸¤ä¸ªæ•°æ®æµä¹‹é—´å»ºç«‹åŒå‘é€šé“ï¼Œä¸”æ”¯æŒä¼—å¤šåè®®å’Œé“¾æ¥æ–¹å¼ã€‚å¦‚ IPã€TCPã€ UDPã€IPv6ã€Socketæ–‡ä»¶ç­‰<br>æ¡ˆä¾‹ï¼šåˆ©ç”¨å·¥å…·socat å¯¹haproxyæœåŠ¡å™¨è¿›è¡Œç®¡ç† - ä¸ç”¨é‡å¯æœåŠ¡èƒ½ç«‹å³ç”Ÿæ•ˆï¼Œæ³¨æ„åªé’ˆå¯¹å•è¿›ç¨‹æœ‰æ•ˆ<br><a target="_blank" rel="noopener" href="http://haproxy-server:9999/haproxy-status">http://haproxy-server:9999/haproxy-status</a> çŠ¶æ€é¡µé¢ä¹Ÿå¯ä»¥æŸ¥çœ‹<br>#åŒä¸€ä¸»æœºä¸Šä¸¤ä¸ªç¨‹åºï¼Œä¾‹å¦‚å®¢æˆ·ç«¯ç¨‹åºä¸æœåŠ¡ç«¯ç¨‹åºï¼Œå¯é€šè¿‡socketè¿›è¡Œé€šè®¯ haproxyè‡ªå¸¦socket<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg<br>global<br>maxconn 100000<br>stats socket &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock mode 600 level admin  â€“&gt; è¯¥æ–‡ä»¶å®ç°socketå’Œhaproxyä¹‹é—´çš„é€šè®¯<br>â€¦.<br>[root@haproxy ~]#file &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>&#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock: socket</p>
<p>#å®‰è£…socat<br>[root@haproxy ~]#apt -y install socat<br>#æŸ¥çœ‹å¸®åŠ©<br>[root@haproxy ~]#socat -h<br>#æŸ¥çœ‹haproxy.sockå¯æ¥å—é‚£äº›æŒ‡ä»¤<br>[root@haproxy ~]#echo â€œhelpâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>The following commands are valid at this level:<br>  abort ssl ca-file <cafile>              : abort a transaction for a CA file<br>  abort ssl cert <certfile>               : abort a transaction for a certificate file<br>  abort ssl crl-file <crlfile>            : abort a transaction for a CRL file<br>  add acl [@<ver>] <acl> <pattern>        : add an acl entry<br>  add map [@<ver>] <map> <key> <val>      : add a map entry (payload supported instead of key&#x2F;val)<br>  add server <bk>&#x2F;<srv>                   : create a new server<br>  add ssl ca-file <cafile> <payload>      : add a certificate into the CA file<br>  add ssl crt-list <list> <cert> [opts]*  : add to crt-list file <list> a line <cert> or a payload<br>  clear acl [@<ver>] <acl>                : clear the contents of this acl<br>  clear counters [all]                    : clear max statistics counters (or all counters)<br>  clear map [@<ver>] <map>                : clear the contents of this map<br>  clear table <table> [<filter>]*         : remove an entry from a table (filter: data&#x2F;key)<br>  commit acl @<ver> <acl>                 : commit the ACL at this version<br>  commit map @<ver> <map>                 : commit the map at this version<br>  commit ssl ca-file <cafile>             : commit a CA file<br>  commit ssl cert <certfile>              : commit a certificate file<br>  commit ssl crl-file <crlfile>           : commit a CRL file<br>  debug dev hash   [msg]                  : return msg hashed if anon is set<br>  del acl <acl> [<key>|#<ref>]            : delete acl entries matching <key><br>  del map <map> [<key>|#<ref>]            : delete map entries matching <key><br>  del server <bk>&#x2F;<srv>                   : remove a dynamically added server<br>  del ssl ca-file <cafile>                : delete an unused CA file<br>  del ssl cert <certfile>                 : delete an unused certificate file<br>  del ssl crl-file <crlfile>              : delete an unused CRL file<br>  del ssl crt-list <list> &lt;cert[:line]&gt;   : delete a line <cert> from crt-list file <list><br>  disable agent                           : disable agent checks<br>  disable dynamic-cookie backend <bk>     : disable dynamic cookies on a specific backend<br>  disable frontend <frontend>             : temporarily disable specific frontend<br>  disable health                          : disable health checks<br>  disable server (DEPRECATED)             : disable a server for maintenance (use â€˜set serverâ€™ instead)<br>  enable agent                            : enable agent checks<br>  enable dynamic-cookie backend <bk>      : enable dynamic cookies on a specific backend<br>  enable frontend <frontend>              : re-enable specific frontend<br>  enable health                           : enable health checks<br>  enable server  (DEPRECATED)             : enable a disabled server (use â€˜set serverâ€™ instead)<br>  get acl <acl> <value>                   : report the patterns matching a sample for an ACL<br>  get map <acl> <value>                   : report the keys and values matching a sample for a map<br>  get var <name>                          : retrieve contents of a process-wide variable<br>  get weight <bk>&#x2F;<srv>                   : report a serverâ€™s current weight<br>  new ssl ca-file <cafile>                : create a new CA file to be used in a crt-list<br>  new ssl cert <certfile>                 : create a new certificate file to be used in a crt-list or a directory<br>  new ssl crlfile <crlfile>               : create a new CRL file to be used in a crt-list<br>  operator                                : lower the level of the current CLI session to operator<br>  prepare acl <acl>                       : prepare a new version for atomic ACL replacement<br>  prepare map <acl>                       : prepare a new version for atomic map replacement<br>  set anon <setting> [value]              : change the anonymized mode setting<br>  set anon global-key <value>             : change the global anonymizing key<br>  set dynamic-cookie-key backend <bk> <k> : change a backend secret key for dynamic cookies<br>  set map <map> [<key>|#<ref>] <value>    : modify a map entry<br>  set maxconn frontend <frontend> <value> : change a frontendâ€™s maxconn setting<br>  set maxconn global <value>              : change the per-process maxconn setting<br>  set maxconn server <bk>&#x2F;<srv>           : change a serverâ€™s maxconn setting<br>  set profiling <what> {auto|on|off}      : enable&#x2F;disable resource profiling (tasks,memory)<br>  set rate-limit <setting> <value>        : change a rate limiting value<br>  set server <bk>&#x2F;<srv> [opts]            : change a serverâ€™s state, weight, address or ssl<br>  set severity-output [none|number|string]: set presence of severity level in feedback information<br>  set ssl ca-file <cafile> <payload>      : replace a CA file<br>  set ssl cert <certfile> <payload>       : replace a certificate file<br>  set ssl crl-file <crlfile> <payload>    : replace a CRL file<br>  set ssl ocsp-response &lt;resp|payload&gt;    : update a certificateâ€™s OCSP Response from a base64-encode DER<br>  set ssl tls-key [id|file] <key>         : set the next TLS key for the <id> or <file> listener to <key><br>  set table <table> key <k> [data.* <v>]* : update or create a table entryâ€™s data<br>  set timeout [cli] <delay>               : change a timeout setting<br>  set weight <bk>&#x2F;<srv>  (DEPRECATED)     : change a serverâ€™s weight (use â€˜set serverâ€™ instead)<br>  show acl [@<ver>] <acl>]                : report available acls or dump an aclâ€™s contents<br>  show activity [-1|0|thread_num]         : show per-thread activity stats (for support&#x2F;developers)<br>  show anon                               : display the current state of anonymized mode<br>  show backend                            : list backends in the current running config<br>  show cache                              : show cache status<br>  show cli level                          : display the level of the current CLI session<br>  show cli sockets                        : dump list of cli sockets<br>  show env [var]                          : dump environment variables known to the process<br>  show errors [<px>] [request|response]   : report last request and&#x2F;or response errors for each proxy<br>  show events [<sink>] [-w] [-n]          : show event sink state<br>  show fd [num]                           : dump list of file descriptors in use or a specific one<br>  show info [desc|json|typed|float]*      : report information about the running process<br>  show libs                               : show loaded object files and libraries<br>  show map [@ver] [map]                   : report available maps or dump a mapâ€™s contents<br>  show peers [dict|-] [section]           : dump some information about all the peers or this peers section<br>  show pools [by*] [match <pfx>] [nb]     : report information about the memory pools usage<br>  show profiling [<what>|&lt;#lines&gt;|<opts>]<em>: show profiling state (all,status,tasks,memory)<br>  show resolvers [id]                     : dumps counters from all resolvers section and associated name servers<br>  show schema json                        : report schema used for stats<br>  show servers conn [<backend>]           : dump server connections status (all or for a single backend)<br>  show servers state [<backend>]          : dump volatile server information (all or for a single backend)<br>  show sess [id]                          : report the list of current sessions or dump this exact session<br>  show ssl ca-file [<cafile>[:<index>]]   : display the SSL CA files used in memory, or the details of a <cafile>, or a single certificate of index <index> of a CA file <cafile><br>  show ssl cert [<certfile>]              : display the SSL certificates used in memory, or the details of a file<br>  show ssl crl-file [&lt;crlfile[:<index>&gt;]] : display the SSL CRL files used in memory, or the details of a <crlfile>, or a single CRL of index <index> of CRL file <crlfile><br>  show ssl crt-list [-n] [<list>]         : show the list of crt-lists or the content of a crt-list file <list><br>  show ssl ocsp-response [id]             : display the IDs of the OCSP responses used in memory, or the details of a single OCSP response<br>  show ssl providers                      : show loaded SSL providers<br>  show startup-logs                       : report logs emitted during HAProxy startup<br>  show stat [desc|json|no-maint|typed|up]</em>: report counters for each proxy and server<br>  show table <table> [<filter>]*          : report table usage stats or dump this tableâ€™s contents (filter: data&#x2F;key)<br>  show tasks                              : show running tasks<br>  show threads                            : show some threads debugging information<br>  show tls-keys [id|*]                    : show tls keys references or dump tls ticket keys when id specified<br>  show trace [<module>]                   : show live tracing state<br>  show version                            : show version of the current process<br>  shutdown frontend <frontend>            : stop a specific frontend<br>  shutdown session [id]                   : kill a specific session<br>  shutdown sessions server <bk>&#x2F;<srv>     : kill sessions on a server<br>  trace [<module>|0] [cmd [argsâ€¦]]      : manage live tracing (empty to list, 0 to stop all)<br>  user                                    : lower the level of the current CLI session to user<br>  help [<command>]                        : list matching or all commands<br>  prompt                                  : toggle interactive mode with prompt<br>  quit                                    : disconnect<br>#æŸ¥çœ‹çº¿ç¨‹<br>[root@haproxy ~]#echo â€œshow threadsâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>  Thread 1 : id&#x3D;0x7fe6932ba0c0 act&#x3D;0 glob&#x3D;0 wq&#x3D;0 rq&#x3D;0 tl&#x3D;0 tlsz&#x3D;0 rqsz&#x3D;0<br>      1&#x2F;1    stuck&#x3D;0 prof&#x3D;0 harmless&#x3D;1 wantrdv&#x3D;0<br>             cpu_ns: poll&#x3D;27025059 now&#x3D;27106301 diff&#x3D;81242<br>             curr_task&#x3D;0<br>  Thread 2 : id&#x3D;0x7fe6932ae640 act&#x3D;0 glob&#x3D;0 wq&#x3D;1 rq&#x3D;0 tl&#x3D;0 tlsz&#x3D;0 rqsz&#x3D;0<br>      1&#x2F;2    stuck&#x3D;0 prof&#x3D;0 harmless&#x3D;1 wantrdv&#x3D;0<br>             cpu_ns: poll&#x3D;5841499886 now&#x3D;5841806929 diff&#x3D;307043<br>             curr_task&#x3D;0</p>
<ul>
<li>Thread 3 : id&#x3D;0x7fe690ad3640 act&#x3D;1 glob&#x3D;0 wq&#x3D;1 rq&#x3D;0 tl&#x3D;0 tlsz&#x3D;0 rqsz&#x3D;0<br>1&#x2F;3    stuck&#x3D;0 prof&#x3D;0 harmless&#x3D;0 wantrdv&#x3D;0<br>       cpu_ns: poll&#x3D;2687436766 now&#x3D;2687675923 diff&#x3D;239157<br>       curr_task&#x3D;0x7fe67c034830 (task) calls&#x3D;2 last&#x3D;0<br>         fct&#x3D;0x55887b9ce170(task_run_applet) ctx&#x3D;0x7fe67c034e70(<CLI>)<br>       strm&#x3D;0x7fe67c034440,8 src&#x3D;unix fe&#x3D;GLOBAL be&#x3D;GLOBAL dst&#x3D;<CLI><br>       txn&#x3D;(nil),0 txn.req&#x3D;-,0 txn.rsp&#x3D;-,0<br>       rqf&#x3D;c08002 rqa&#x3D;0 rpf&#x3D;80008000 rpa&#x3D;0<br>       scf&#x3D;0x7fe67c026800,EST,0 scb&#x3D;0x7fe67c0348e0,EST,1<br>       af&#x3D;(nil),0 sab&#x3D;0x7fe67c034e70,11<br>       cof&#x3D;0x7fe67c034bd0,300:PASS(0x7fe67c026c20)&#x2F;RAW((nil))&#x2F;unix_stream(25)<br>       cob&#x3D;(nil),0:NONE((nil))&#x2F;NONE((nil))&#x2F;NONE(-1)<br>Thread 4 : id&#x3D;0x7fe68bfff640 act&#x3D;0 glob&#x3D;0 wq&#x3D;1 rq&#x3D;0 tl&#x3D;0 tlsz&#x3D;0 rqsz&#x3D;0<br>1&#x2F;4    stuck&#x3D;0 prof&#x3D;0 harmless&#x3D;1 wantrdv&#x3D;0<br>       cpu_ns: poll&#x3D;1573141326 now&#x3D;1573420254 diff&#x3D;278928<br>       curr_task&#x3D;0</li>
</ul>
<p>#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„åç«¯æœåŠ¡<br>[root@haproxy ~]#echo â€œshow backendâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock</p>
<h1 id="name"><a href="#name" class="headerlink" title="name"></a>name</h1><p>stats<br><a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/">www.mooreyxia.net_80</a><br><a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/">www.mooreyxia.org_servers</a><br>#å¯ä»¥ç”¨äºå®ç°Zabbixç›‘æ§<br>[root@haproxy ~]#echo â€œshow infoâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>Name: HAProxy<br>Version: 2.7.1-3e4af0e<br>Release_date: 2022&#x2F;12&#x2F;19<br>Nbthread: 4<br>Nbproc: 1<br>Process_num: 1<br>Pid: 1257<br>Uptime: 0d 4h10m05s<br>Uptime_sec: 15005<br>Memmax_MB: 0<br>PoolAlloc_MB: 0<br>PoolUsed_MB: 0<br>PoolFailed: 0<br>Ulimit-n: 200041<br>Maxsock: 200041<br>Maxconn: 100000<br>Hard_maxconn: 100000<br>CurrConns: 0<br>CumConns: 17492<br>CumReq: 12<br>MaxSslConns: 0<br>CurrSslConns: 0<br>CumSslConns: 0<br>Maxpipes: 0<br>PipesUsed: 0<br>PipesFree: 0<br>ConnRate: 0<br>ConnRateLimit: 0<br>MaxConnRate: 3<br>SessRate: 0<br>SessRateLimit: 0<br>MaxSessRate: 3<br>SslRate: 0<br>SslRateLimit: 0<br>MaxSslRate: 0<br>SslFrontendKeyRate: 0<br>SslFrontendMaxKeyRate: 0<br>SslFrontendSessionReuse_pct: 0<br>SslBackendKeyRate: 0<br>SslBackendMaxKeyRate: 0<br>SslCacheLookups: 0<br>SslCacheMisses: 0<br>CompressBpsIn: 0<br>CompressBpsOut: 0<br>CompressBpsRateLim: 0<br>ZlibMemUsage: 0<br>MaxZlibMemUsage: 0<br>Tasks: 23<br>Run_queue: 0<br>Idle_pct: 100<br>node: haproxy<br>Stopping: 0<br>Jobs: 6<br>Unstoppable Jobs: 1<br>Listeners: 5<br>ActivePeers: 0<br>ConnectedPeers: 0<br>DroppedLogs: 0<br>BusyPolling: 0<br>FailedResolutions: 0<br>TotalBytesOut: 78033<br>TotalSplicdedBytesOut: 0<br>BytesOutRate: 0<br>DebugCommandsIssued: 0<br>CumRecvLogs: 0<br>Build info: 2.7.1-3e4af0e<br>Memmax_bytes: 0<br>PoolAlloc_bytes: 252168<br>PoolUsed_bytes: 252168<br>Start_time_sec: 1673947932<br>Tainted: 0</p>
<p>#è·å–å½“å‰è¿æ¥æ•°<br>[root@haproxy ~]#echo â€œshow infoâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock |awk â€˜&#x2F;CurrConns&#x2F;{print $2}â€™<br>0</p>
<p>#æŸ¥çœ‹å½“å‰æœåŠ¡å™¨çš„çŠ¶æ€å€¼<br>[root@haproxy ~]#echo â€œshow servers stateâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>1</p>
<h1 id="be-id-be-name-srv-id-srv-name-srv-addr-srv-op-state-srv-admin-state-srv-uweight-srv-iweight-srv-time-since-last-change-srv-check-status-srv-check-result-srv-check-health-srv-check-state-srv-agent-state-bk-f-forced-id-srv-f-forced-id-srv-fqdn-srv-port-srvrecord-srv-use-ssl-srv-check-port-srv-check-addr-srv-agent-addr-srv-agent-port"><a href="#be-id-be-name-srv-id-srv-name-srv-addr-srv-op-state-srv-admin-state-srv-uweight-srv-iweight-srv-time-since-last-change-srv-check-status-srv-check-result-srv-check-health-srv-check-state-srv-agent-state-bk-f-forced-id-srv-f-forced-id-srv-fqdn-srv-port-srvrecord-srv-use-ssl-srv-check-port-srv-check-addr-srv-agent-addr-srv-agent-port" class="headerlink" title="be_id be_name srv_id srv_name srv_addr srv_op_state srv_admin_state srv_uweight srv_iweight srv_time_since_last_change srv_check_status srv_check_result srv_check_health srv_check_state srv_agent_state bk_f_forced_id srv_f_forced_id srv_fqdn srv_port srvrecord srv_use_ssl srv_check_port srv_check_addr srv_agent_addr srv_agent_port"></a>be_id be_name srv_id srv_name srv_addr srv_op_state srv_admin_state srv_uweight srv_iweight srv_time_since_last_change srv_check_status srv_check_result srv_check_health srv_check_state srv_agent_state bk_f_forced_id srv_f_forced_id srv_fqdn srv_port srvrecord srv_use_ssl srv_check_port srv_check_addr srv_agent_addr srv_agent_port</h1><p>3 <a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/">www.mooreyxia.net_80</a> 1 web01 10.0.0.204 0 0 1 1 15291 8 2 0 6 0 0 0 - 80 - 0 0 - - 0<br>3 <a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/">www.mooreyxia.net_80</a> 2 web02 10.0.0.205 0 0 1 1 15288 7 0 0 7 0 0 0 - 80 - 0 0 - - 0<br>5 <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/">www.mooreyxia.org_servers</a> 1 web01 10.0.0.202 2 0 1 1 15292 6 3 7 6 0 0 0 - 80 - 0 0 - - 0<br>5 <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/">www.mooreyxia.org_servers</a> 2 web02 10.0.0.203 2 0 1 1 15292 6 3 7 6 0 0 0 - 80 - 0 0 - - 0</p>
<p>#è·å–ç‰¹å®šæœåŠ¡å™¨çš„æƒé‡<br>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/web02">www.mooreyxia.net_80/web02</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>1 (initial 1)</p>
<p>#é€šè¿‡setè®¾ç½®æœåŠ¡å™¨çš„æƒé‡<br>[root@haproxy ~]#echo â€œset weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/web02">www.mooreyxia.net_80/web02</a> 2â€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.net_80/web02">www.mooreyxia.net_80/web02</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>2 (initial 1)</p>
<p>#ä¸‹çº¿ç«¯æœåŠ¡å™¨<br>[root@haproxy ~]#echo â€œdisable server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/web01">www.mooreyxia.org_servers/web01</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock</p>
<p>#ä¸Šçº¿åç«¯æœåŠ¡å™¨<br>[root@haproxy ~]#echo â€œenable server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/web01">www.mooreyxia.org_servers/web01</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock</p>
<p>#æ–°çš„å†™æ³•<br>#ç›¸å½“äºdisable server<br>[root@haproxy ~]#echo â€œset server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/web01">www.mooreyxia.org_servers/web01</a> state maintâ€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>#ç›¸å½“äºenable server<br>[root@haproxy ~]#echo â€œset server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/web01">www.mooreyxia.org_servers/web01</a> state readyâ€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>#drain - active or backup SOFT STOPPED for maintenance ç›¸å½“äºnginxä¸­çš„å¹³æ»‘ä¸‹çº¿ï¼Œå·²å»ºç«‹è¿æ¥çš„ç”¨æˆ·ä¸ä¼šè¢«æ–­å¼€<br>[root@haproxy ~]#echo â€œset server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/web01">www.mooreyxia.org_servers/web01</a> state drainâ€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sockæ¡ˆä¾‹ï¼šä¸Šçº¿å’Œä¸‹çº¿åç«¯æœåŠ¡å™¨è„šæœ¬<br>#æŸ¥çœ‹é…ç½®çš„æœåŠ¡å<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 check inter 3000 fall 3 rise 5</p>
<p>#frontend <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a></p>
<h1 id="bind-192-168-10-200-80"><a href="#bind-192-168-10-200-80" class="headerlink" title="bind 192.168.10.200:80"></a>bind 192.168.10.200:80</h1><h1 id="use-backend-www-mooreyxia-org-servers"><a href="#use-backend-www-mooreyxia-org-servers" class="headerlink" title="use_backend www.mooreyxia.org_servers"></a>use_backend <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/">www.mooreyxia.org_servers</a></h1><p>#backend <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_servers/">www.mooreyxia.org_servers</a></p>
<h1 id="server-web01-10-0-0-202-80-check-inter-3000-fall-3-rise-5"><a href="#server-web01-10-0-0-202-80-check-inter-3000-fall-3-rise-5" class="headerlink" title="server web01 10.0.0.202:80 check inter 3000 fall 3 rise 5"></a>server web01 10.0.0.202:80 check inter 3000 fall 3 rise 5</h1><h1 id="server-web02-10-0-0-203-80-check-inter-3000-fall-3-rise-5"><a href="#server-web02-10-0-0-203-80-check-inter-3000-fall-3-rise-5" class="headerlink" title="server web02 10.0.0.203:80 check inter 3000 fall 3 rise 5"></a>server web02 10.0.0.203:80 check inter 3000 fall 3 rise 5</h1><p>#è„šæœ¬<br>[root@haproxy ~]#vim haproxy_host_up_down.sh<br>[root@haproxy ~]#cat haproxy_host_up_down.sh<br>#!&#x2F;bin&#x2F;bash<br>#<br>#********************************************************************<br>#Author:            mooreyxia<br>#Date:              2023-01-17<br>#FileName:          haproxy_host_up_down.sh<br>#Description:       The test script<br>#Copyright (C):     2023 All rights reserved<br>#********************************************************************</p>
<p>case $1 in<br>up)<br>    echo â€œenable server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/$2">www.mooreyxia.org/$2</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>    [ $? -eq 0 ] &amp;&amp; echo â€œ$2 is upâ€<br>    ;;<br>down)<br>    echo â€œdisable server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/$2">www.mooreyxia.org/$2</a>â€œ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>    [ $? -eq 0 ] &amp;&amp; echo â€œ$2 is downâ€<br>    ;;<br>*)<br>    echo â€œUsage: <code>basename $0</code> up|down IPâ€<br>    ;;<br>esac</p>
<p>[root@haproxy ~]#chmod +x haproxy_host_up_down.sh</p>
<p>#ä¸‹çº¿202 - ä¸Šçº¿æ‰§è¡Œupå³å¯<br>[root@haproxy ~]#.&#x2F;haproxy_host_up_down.sh down 10.0.0.202</p>
<p>10.0.0.202 is down<br><img src="/../img/8455bd091fb5036e007056ee251cc731d7a636.png"><br>æ¡ˆä¾‹ï¼šå®ç°å®¹å™¨æœåŠ¡çš„ä¸Šçº¿å’Œä¸‹çº¿è„šæœ¬ - é’ˆå¯¹ docker-nginx æœåŠ¡åšå¹³æ»‘å‡çº§<br>WEB_SERVERS&#x3D;â€<br>10.0.0.101<br>10.0.0.102<br>â€œ<br>for i in $WEB_SERVERS;do<br>  echo â€œset server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_nginx/$i">www.mooreyxia.org_nginx/$i</a> state maintâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>  ssh $i docker rm -f nginx<br>  ssh $i â€œecho DOCKER $i WEBSITE $1 &gt; &#x2F;data&#x2F;www&#x2F;index.htmlâ€<br>  ssh $i docker run -d -p 80:80 -v &#x2F;data&#x2F;www:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html â€“name nginx nginx<br>  sleep 10<br>  echo â€œset server <a target="_blank" rel="noopener" href="http://www.mooreyxia.org_nginx/$i">www.mooreyxia.org_nginx/$i</a> state readyâ€ | socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>donestatic-rr ç®—æ³•<br>â€¢ static-rrï¼šåŸºäºæƒé‡çš„è½®è¯¢è°ƒåº¦ï¼Œä¸æ”¯æŒè¿è¡Œæ—¶åˆ©ç”¨socatè¿›è¡Œæƒé‡çš„åŠ¨æ€è°ƒæ•´(åªæ”¯æŒ0å’Œ1ï¼‰,ä¸æ”¯æŒå…¶å®ƒå€¼åŠåç«¯æœåŠ¡å™¨æ…¢å¯åŠ¨ï¼Œå…¶åç«¯ä¸»æœºæ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œç›¸å½“äºLVSä¸­çš„ wrr<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance static-rr<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5<br>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯•<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a></p>
<p>#ä¸æ”¯æŒè¿è¡Œæ—¶åˆ©ç”¨socatè¿›è¡Œæƒé‡çš„åŠ¨æ€è°ƒæ•´<br>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.202">www.mooreyxia.org/10.0.0.202</a> â€œ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>3 (initial 3)</p>
<p>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a> â€œ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>1 (initial 1)</p>
<p>#å°è¯•è¿è¡Œæ—¶æ›´æ”¹æƒé‡<br>[root@haproxy ~]#echo â€œset weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a>  4â€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>Backend is using a static LB algorithm and only accepts weights â€˜0%â€™ and â€˜100%â€™.first ç®—æ³•<br>â€¢ firstï¼šæ ¹æ®æœåŠ¡å™¨åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ï¼Œè‡ªä¸Šè€Œä¸‹è¿›è¡Œè°ƒåº¦ï¼Œä½†æ˜¯å…¶åªä¼šå½“ç¬¬ä¸€å°æœåŠ¡å™¨çš„è¿æ¥æ•°è¾¾åˆ°ä¸Šé™ï¼Œæ–°è¯·æ±‚æ‰ä¼šåˆ†é…ç»™ä¸‹ä¸€å°æœåŠ¡ï¼Œå› æ­¤ä¼šå¿½ç•¥æœåŠ¡å™¨çš„æƒé‡è®¾ç½®ï¼Œæ­¤æ–¹å¼ä½¿ç”¨è¾ƒå°‘<br>â€¢ **ä¸æ”¯æŒç”¨socatè¿›è¡ŒåŠ¨æ€ä¿®æ”¹æƒé‡,**å¯ä»¥è®¾ç½®0å’Œ1,å¯ä»¥è®¾ç½®å…¶å®ƒå€¼ä½†æ— æ•ˆ<br>æ¡ˆä¾‹ï¼š<br>#è®¾ç½®æœ€å¤§è¿æ¥æ•°ä¸€ä¸ªï¼Œè¾¾åˆ°è¿æ¥ä¸Šçº¿åå…¨éƒ¨è°ƒåº¦è®¿é—®å¦ä¸€ä¸ªæœåŠ¡<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance first<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 maxconn 1 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5</p>
<p>#å ç”¨202<br>[root@internet ~]#wget â€“limit-rate 10 <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/1.txt">http://www.mooreyxia.org/1.txt</a><br>â€“2023-01-18 11:43:06â€“  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/1.txt">http://www.mooreyxia.org/1.txt</a><br>Resolving <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a> (<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a>)â€¦ 192.168.10.200<br>Connecting to <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a> (<a target="_blank" rel="noopener" href="http://www.mooreyxia.org)|192.168.10.200|/">www.mooreyxia.org)|192.168.10.200|:80</a>â€¦ connected.<br>HTTP request sent, awaiting responseâ€¦ 200 OK<br>Length: 654506 (639K) [text&#x2F;plain]<br>Saving to: â€˜1.txt.2â€™</p>
<p>1.txt.1                      0%[                                       ]   1.28K  10.4 B&#x2F;s    eta 18h 8m ^                                      ]   1.27K  10.0 B&#x2F;s    eta 18h 8m </p>
<p>#æµ‹è¯•è®¿é—®<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.orgåŠ¨æ€ç®—æ³•/">www.mooreyxia.orgåŠ¨æ€ç®—æ³•</a><br>â€¢ åŠ¨æ€ç®—æ³•ï¼šåŸºäºåç«¯æœåŠ¡å™¨çŠ¶æ€è¿›è¡Œè°ƒåº¦é€‚å½“è°ƒæ•´ï¼Œæ–°è¯·æ±‚å°†ä¼˜å…ˆè°ƒåº¦è‡³å½“å‰è´Ÿè½½è¾ƒä½çš„æœåŠ¡å™¨ï¼Œä¸”æƒé‡å¯ä»¥åœ¨haproxyè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´æ— éœ€é‡å¯ã€‚<br>roundrobin ç®—æ³•<br>â€¢ roundrobinï¼šåŸºäºæƒé‡çš„è½®è¯¢åŠ¨æ€è°ƒåº¦ç®—æ³•ï¼Œæ”¯æŒæƒé‡çš„è¿è¡Œæ—¶è°ƒæ•´ï¼Œä¸åŒäºlvsä¸­çš„rrè½®è®­æ¨¡å¼ï¼ŒHAProxyä¸­çš„roundrobinæ”¯æŒæ…¢å¯åŠ¨(æ–°åŠ çš„æœåŠ¡å™¨ä¼šé€æ¸å¢åŠ è½¬å‘æ•°)ï¼Œå…¶æ¯ä¸ªåç«¯backendä¸­æœ€å¤šæ”¯æŒ4095ä¸ªreal serverï¼Œæ”¯æŒå¯¹real serveræƒé‡åŠ¨æ€è°ƒæ•´ï¼Œroundrobinä¸ºé»˜è®¤è°ƒåº¦ç®—æ³•,æ­¤ç®—æ³•ä½¿ç”¨å¹¿æ³›<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance roundrobin<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5</p>
<p>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯•<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a></p>
<p>#å°è¯•è¿è¡Œæ—¶æ›´æ”¹æƒé‡<br>[root@haproxy ~]#echo â€œset weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a>  5â€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock</p>
<p>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a> â€œ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>5 (initial 1)</p>
<p>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.202">www.mooreyxia.org/10.0.0.202</a> â€œ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>3 (initial 3)</p>
<p>#æµ‹è¯•<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.orgleastconn/">www.mooreyxia.orgleastconn</a> ç®—æ³•<br>â€¢ leastconn åŠ æƒçš„æœ€å°‘è¿æ¥çš„åŠ¨æ€ï¼Œæ”¯æŒæƒé‡çš„è¿è¡Œæ—¶è°ƒæ•´å’Œæ…¢å¯åŠ¨ï¼Œå³æ ¹æ®å½“å‰è¿æ¥æœ€å°‘çš„åç«¯æœåŠ¡å™¨è€Œéæƒé‡è¿›è¡Œä¼˜å…ˆè°ƒåº¦(æ–°å®¢æˆ·ç«¯è¿æ¥)ï¼Œæ¯”è¾ƒé€‚åˆé•¿è¿æ¥çš„åœºæ™¯ä½¿ç”¨ï¼Œç›¸å½“äºLVSçš„WLCç®—æ³•ã€‚æ¯”å¦‚ï¼šMySQLç­‰åœºæ™¯ã€‚<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance leastconn<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 1 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5random ç®—æ³•<br>â€¢ åœ¨1.9ç‰ˆæœ¬å¼€å§‹å¢åŠ  randomçš„è´Ÿè½½å¹³è¡¡ç®—æ³•ï¼Œå…¶åŸºäºéšæœºæ•°ä½œä¸ºä¸€è‡´æ€§hashçš„keyï¼Œéšæœºè´Ÿè½½å¹³è¡¡å¯¹äºå¤§å‹æœåŠ¡å™¨åœºæˆ–ç»å¸¸æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨éå¸¸æœ‰ç”¨ï¼Œæ”¯æŒweightçš„åŠ¨æ€è°ƒæ•´ï¼Œweightè¾ƒå¤§çš„ä¸»æœºæœ‰æ›´å¤§æ¦‚ç‡è·å–æ–°è¯·æ±‚<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance random<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5å¯åŠ¨å¯é™çš„å…¶ä»–ç®—æ³•<br>source ç®—æ³•<br>â€¢ æºåœ°å€hashï¼ŒåŸºäºç”¨æˆ·æºåœ°å€hashå¹¶å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œåç»­åŒä¸€ä¸ªæºåœ°å€è¯·æ±‚å°†è¢«è½¬å‘è‡³åŒä¸€ä¸ªåç«¯webæœåŠ¡å™¨ã€‚æ­¤æ–¹å¼å½“åç«¯æœåŠ¡å™¨æ•°æ®é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¯¼è‡´å¾ˆå¤šç”¨æˆ·çš„è¯·æ±‚è½¬å‘è‡³æ–°çš„åç«¯æœåŠ¡å™¨ï¼Œé»˜è®¤ä¸ºé™æ€æ–¹å¼ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡hash-typeé€‰é¡¹è¿›è¡Œæ›´æ”¹<br>â€¢ è¿™ä¸ªç®—æ³•ä¸€èˆ¬æ˜¯åœ¨ä¸æ’å…¥Cookieçš„TCPæ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œä¹Ÿå¯ç»™ä¸æ”¯æŒä¼šè¯cookieçš„å®¢æˆ·æä¾›ä¼šè¯ç²˜æ€§ï¼Œé€‚ç”¨äºéœ€è¦sessionä¼šè¯ä¿æŒä½†ä¸æ”¯æŒcookieå’Œç¼“å­˜çš„åœºæ™¯<br>â€¢ æºåœ°å€æœ‰ä¸¤ç§è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚åˆ°åç«¯æœåŠ¡å™¨çš„æœåŠ¡å™¨é€‰å–è®¡ç®—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å–æ¨¡æ³•å’Œä¸€è‡´æ€§hash<br>map-base å–æ¨¡æ³•<br>â€¢ map-basedï¼šå–æ¨¡æ³•ï¼Œå¯¹sourceåœ°å€è¿›è¡Œhashè®¡ç®—ï¼Œå†åŸºäºæœåŠ¡å™¨æ€»æƒé‡çš„å–æ¨¡ï¼Œæœ€ç»ˆç»“æœå†³å®šå°†æ­¤è¯·æ±‚è½¬å‘è‡³å¯¹åº”çš„åç«¯æœåŠ¡å™¨ã€‚æ­¤æ–¹æ³•æ˜¯é™æ€çš„ï¼Œå³ä¸æ”¯æŒåœ¨çº¿è°ƒæ•´æƒé‡ï¼Œä¸æ”¯æŒæ…¢å¯åŠ¨ï¼Œå¯å®ç°å¯¹åç«¯æœåŠ¡å™¨å‡è¡¡è°ƒåº¦ã€‚ç¼ºç‚¹æ˜¯å½“æœåŠ¡å™¨çš„æ€»æƒé‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³æœ‰æœåŠ¡å™¨ä¸Šçº¿æˆ–ä¸‹çº¿ï¼Œéƒ½ä¼šå› æ€»æƒé‡å‘ç”Ÿå˜åŒ–è€Œå¯¼è‡´è°ƒåº¦ç»“æœæ•´ä½“æ”¹å˜ï¼Œhash-type æŒ‡å®šçš„é»˜è®¤å€¼ä¸ºæ­¤ç®—æ³•<br>map-basedç®—æ³•ï¼šåŸºäºæƒé‡å–æ¨¡ï¼Œhash(source_ip)%æ‰€æœ‰åç«¯æœåŠ¡å™¨ç›¸åŠ çš„æ€»æƒé‡æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance source<br>    hash-type map-based  â€“&gt; é»˜è®¤ï¼Œå¯ä¸å†™<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5<br>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯• - åªè¦å®¢æˆ·ç«¯åœ°å€æ˜¯åŒä¸€åœ°å€ï¼Œè°ƒåº¦åˆ°æœåŠ¡å™¨çš„åœ°å€å›ºå®š<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.orgä¸€è‡´æ€§/">www.mooreyxia.orgä¸€è‡´æ€§</a> hash<br>â€¢ ä¸€è‡´æ€§å“ˆå¸Œï¼Œå½“æœåŠ¡å™¨çš„æ€»æƒé‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯¹è°ƒåº¦ç»“æœå½±å“æ˜¯å±€éƒ¨çš„ï¼Œä¸ä¼šå¼•èµ·å¤§çš„å˜åŠ¨ï¼Œhashï¼ˆoï¼‰mod n ï¼Œè¯¥hashç®—æ³•æ˜¯åŠ¨æ€çš„ï¼Œæ”¯æŒä½¿ç”¨ socatç­‰å·¥å…·è¿›è¡Œåœ¨çº¿æƒé‡è°ƒæ•´ï¼Œæ”¯æŒæ…¢å¯åŠ¨<br>#ç®—æ³•ï¼š<br>1ã€key1&#x3D;hash(source_ip)%(2^32) [0â€”4294967295]<br>2ã€keyA&#x3D;hash(åç«¯æœåŠ¡å™¨è™šæ‹Ÿip)%(2^32)<br>3ã€å°†key1å’ŒkeyAéƒ½æ”¾åœ¨hashç¯ä¸Šï¼Œå°†ç”¨æˆ·è¯·æ±‚è°ƒåº¦åˆ°ç¦»key1æœ€è¿‘çš„keyAå¯¹åº”çš„åç«¯æœåŠ¡å™¨</p>
<p>#hashç¯åæ–œé—®é¢˜<br>å¢åŠ è™šæ‹ŸæœåŠ¡å™¨IPæ•°é‡ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªåç«¯æœåŠ¡å™¨æ ¹æ®æƒé‡ä¸º1ç”Ÿæˆ1000ä¸ªè™šæ‹ŸIPï¼Œå†hashã€‚è€Œåç«¯æœåŠ¡å™¨æƒé‡ä¸º2åˆ™ç”Ÿæˆ2000çš„è™šæ‹ŸIPï¼Œå†è¿›è¡Œhashè¿ç®—,æœ€ç»ˆåœ¨hashç¯ä¸Šç”Ÿæˆ3000ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œè§£å†³hashç¯åæ–œé—®é¢˜</p>
<p>ä¸€è‡´æ€§hashç¤ºæ„å›¾ï¼š<br><img src="/../img/e7fc9024887ad759b0c6776d4f0fee4bebdd2f.png"><br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance source<br>    hash-type consistent<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5</p>
<p>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯• - åªè¦å®¢æˆ·ç«¯åœ°å€æ˜¯åŒä¸€åœ°å€ï¼Œè°ƒåº¦åˆ°æœåŠ¡å™¨çš„åœ°å€å›ºå®š<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a></p>
<p>#å°è¯•è¿è¡Œæ—¶æ›´æ”¹æƒé‡<br>[root@haproxy ~]#echo â€œset weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a> 10â€ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock</p>
<p>[root@haproxy ~]#echo â€œget weight <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/10.0.0.203">www.mooreyxia.org/10.0.0.203</a> â€œ |socat stdio &#x2F;var&#x2F;lib&#x2F;haproxy&#x2F;haproxy.sock<br>10 (initial 1)uri ç®—æ³•<br>â€¢ åŸºäºå¯¹ç”¨æˆ·è¯·æ±‚çš„URIçš„å·¦åŠéƒ¨åˆ†æˆ–æ•´ä¸ªuriåšhashï¼Œå†å°†hashç»“æœå¯¹æ€»æƒé‡è¿›è¡Œå–æ¨¡åï¼Œæ ¹æ®æœ€ç»ˆç»“æœå°†è¯·æ±‚è½¬å‘åˆ°åç«¯æŒ‡å®šæœåŠ¡å™¨ï¼Œé€‚ç”¨äºåç«¯æ˜¯ç¼“å­˜æœåŠ¡å™¨åœºæ™¯ï¼Œé»˜è®¤æ˜¯é™æ€ç®—æ³•ï¼Œå¯è®¾ç½®åŠ¨æ€ï¼Œé€šè¿‡hash-typeæŒ‡å®šmap-basedå’Œconsistentï¼Œæ¥å®šä¹‰ä½¿ç”¨å–æ¨¡æ³•è¿˜æ˜¯ä¸€è‡´æ€§hashã€‚<br>æ³¨æ„ï¼šæ­¤ç®—æ³•åŸºäºåº”ç”¨å±‚ï¼Œæ‰€ä»¥åªæ”¯æŒ mode http ï¼Œä¸æ”¯æŒ mode tcpã€lvsç”±äºæ˜¯å››å±‚è´Ÿè½½å‡è¡¡ï¼Œæ‹¿ä¸åˆ°ä¸ƒå±‚çš„æ•°æ®ï¼Œæ‰€ä»¥åšä¸äº†ä¸ƒå±‚ç›¸å…³çš„ç®—æ³•è°ƒåº¦ã€‘<br><scheme>:&#x2F;&#x2F;<user>:<password>@<host>:<port>&#x2F;<path>;<params>?<query>#<frag><br>å·¦åŠéƒ¨åˆ†ï¼š&#x2F;<path>;<params><br>æ•´ä¸ªuriï¼š&#x2F;<path>;<params>?<query>#<frag>æ¡ˆä¾‹ï¼š<br>#202æœåŠ¡å™¨<br>[root@web01-mooreyxia ~]#cd &#x2F;var&#x2F;www&#x2F;html&#x2F;<br>[root@web01-mooreyxia html]#for i in {1..10};do echo test$i.html on 10.0.0.202 &gt; test$i.html;done<br>[root@web01-mooreyxia html]#ll<br>æ€»ç”¨é‡ 696<br>drwxr-xr-x 2 root root   4096  1æœˆ 18 13:07 .&#x2F;<br>drwxr-xr-x 3 root root   4096 10æœˆ 28 16:31 ..&#x2F;<br>-rw-râ€“râ€“ 1 root root 654506  1æœˆ 18 11:34 1.txt<br>-rw-râ€“râ€“ 1 root root     36  1æœˆ 17 15:13 index.html<br>-rw-râ€“râ€“ 1 root root    612  1æœˆ 16 14:42 index.nginx-debian.html<br>-rw-râ€“râ€“ 1 root root     26  1æœˆ 18 13:07 test10.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test1.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test2.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test3.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test4.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test5.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test6.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test7.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test8.html<br>-rw-râ€“râ€“ 1 root root     25  1æœˆ 18 13:07 test9.html<br>[root@web01-mooreyxia html]#cat test1.html<br>test1.html on 10.0.0.202</p>
<p>#203æœåŠ¡å™¨<br>[root@web02-mooreyxia ~]#cd &#x2F;var&#x2F;www&#x2F;html&#x2F;<br>[root@web02-mooreyxia html]#for i in {1..10};do echo test$i.html on 10.0.0.203 &gt; test$i.html;done<br>[root@web02-mooreyxia html]#ls<br>index.html  index.nginx-debian.html  test10.html  test1.html  test2.html  test3.html  test4.html  test5.html  test6.html  test7.html  test8.html  test9.html<br>[root@web02-mooreyxia html]#cat test3.html<br>test3.html on 10.0.0.203</p>
<p>#è®¾ç½®uriç®—æ³•<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance uri<br>    hash-type consistent â€“&gt; å¯è®¾ç½®åŠ¨æ€ï¼Œé»˜è®¤é™æ€<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5<br>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯• - ç”¨æˆ·è¯·æ±‚çš„URIä¸å˜åˆ™è°ƒåº¦å‘åŒä¸€æœåŠ¡å™¨<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test1.html">http://www.mooreyxia.org/test1.html</a><br>test1.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test1.html">http://www.mooreyxia.org/test1.html</a><br>test1.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test1.html">http://www.mooreyxia.org/test1.html</a><br>test1.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test2.html">http://www.mooreyxia.org/test2.html</a><br>test2.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test2.html">http://www.mooreyxia.org/test2.html</a><br>test2.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test2.html">http://www.mooreyxia.org/test2.html</a><br>test2.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test3.html">http://www.mooreyxia.org/test3.html</a><br>test3.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test4.html">http://www.mooreyxia.org/test4.html</a><br>test4.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test4.html">http://www.mooreyxia.org/test4.html</a><br>test4.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test4.html">http://www.mooreyxia.org/test4.html</a><br>test4.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test4.html">http://www.mooreyxia.org/test4.html</a><br>test4.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html">http://www.mooreyxia.org/test5.html</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html">http://www.mooreyxia.org/test5.html</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html">http://www.mooreyxia.org/test5.html</a><br>test5.html on 10.0.0.202url_param ç®—æ³•<br>â€¢ url_paramå¯¹ç”¨æˆ·è¯·æ±‚çš„urlä¸­çš„ params éƒ¨åˆ†ä¸­çš„ä¸€ä¸ªå‚æ•°keyå¯¹åº”çš„valueå€¼ä½œhashè®¡ç®—ï¼Œå¹¶ç”±æœåŠ¡å™¨æ€»æƒé‡ç›¸é™¤ä»¥åæ´¾å‘è‡³æŸæŒ‘å‡ºçš„æœåŠ¡å™¨ï¼›é€šå¸¸ç”¨äºè¿½è¸ªç”¨æˆ·ï¼Œä»¥ç¡®ä¿æ¥è‡ªåŒä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚å§‹ç»ˆå‘å¾€åŒä¸€ä¸ªreal serverï¼Œå¦‚æœæ— æ²¡keyï¼Œå°†æŒ‰roundrobinç®—æ³•<br>æ³¨æ„ï¼šæ­¤ç®—æ³•åŸºäºåº”ç”¨å±‚<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance url_param userid<br>    hash-type consistent    â€“&gt; å¯è®¾ç½®åŠ¨æ€ï¼Œé»˜è®¤é™æ€<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5</p>
<p>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯• - keyå€¼ä¸å˜è°ƒåº¦è‡³æœåŠ¡å™¨ä¸å˜<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=1">http://www.mooreyxia.org/test5.html?userid=1</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=1">http://www.mooreyxia.org/test5.html?userid=1</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=1">http://www.mooreyxia.org/test5.html?userid=1</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=2">http://www.mooreyxia.org/test5.html?userid=2</a><br>test5.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=2">http://www.mooreyxia.org/test5.html?userid=2</a><br>test5.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=2">http://www.mooreyxia.org/test5.html?userid=2</a><br>test5.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=2">http://www.mooreyxia.org/test5.html?userid=2</a><br>test5.html on 10.0.0.203<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=3">http://www.mooreyxia.org/test5.html?userid=3</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=3">http://www.mooreyxia.org/test5.html?userid=3</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=3">http://www.mooreyxia.org/test5.html?userid=3</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=4">http://www.mooreyxia.org/test5.html?userid=4</a><br>test5.html on 10.0.0.202<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/test5.html?userid=4hdr">http://www.mooreyxia.org/test5.html?userid=4hdr</a> ç®—æ³•<br>â€¢ é’ˆå¯¹ç”¨æˆ·æ¯ä¸ªhttpå¤´éƒ¨(header)è¯·æ±‚ä¸­çš„æŒ‡å®šä¿¡æ¯åšhashï¼Œæ­¤å¤„ç”± name æŒ‡å®šçš„httpé¦–éƒ¨å°†ä¼šè¢«å–å‡ºå¹¶åšhashè®¡ç®—ï¼Œç„¶åç”±æœåŠ¡å™¨æ€»æƒé‡å–æ¨¡ä»¥åæ´¾å‘è‡³æŸæŒ‘å‡ºçš„æœåŠ¡å™¨ï¼Œå¦‚æœæ— æœ‰æ•ˆå€¼ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤çš„è½®è¯¢è°ƒåº¦ã€‚<br>ç®€å•æ¥è¯´å°±æ˜¯æ ¹æ®httpæŠ¥æ–‡å¤´ä¸­çš„å‚æ•°åšè°ƒåº¦è¿ç®—<br>æ¡ˆä¾‹ï¼šé’ˆå¯¹ä¸åŒçš„æµè§ˆå™¨è¿›è¡Œè°ƒåº¦<br>[root@haproxy ~]#vim &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance hdr(User-Agent)<br>    hash-type consistent    â€“&gt; å¯è®¾ç½®åŠ¨æ€ï¼Œé»˜è®¤é™æ€<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5</p>
<p>[root@haproxy ~]#systemctl restart haproxy.service</p>
<p>#æµ‹è¯•<br>#æŸ¥çœ‹æµè§ˆå™¨ç‰ˆæœ¬ - User-Agent: curl&#x2F;7.61.1<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org/</a> -Iv</p>
<ul>
<li>Trying 192.168.10.200â€¦</li>
<li>TCP_NODELAY set</li>
<li>Connected to <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a> (192.168.10.200) port 80 (#0)<blockquote>
<p>HEAD &#x2F; HTTP&#x2F;1.1<br>Host: <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>User-Agent: curl&#x2F;7.61.1<br>Accept: <em>&#x2F;</em></p>
</blockquote>
&lt; HTTP&#x2F;1.1 200 OK<br>HTTP&#x2F;1.1 200 OK<br>&lt; server: nginx&#x2F;1.18.0 (Ubuntu)<br>server: nginx&#x2F;1.18.0 (Ubuntu)<br>&lt; date: Wed, 18 Jan 2023 05:35:17 GMT<br>date: Wed, 18 Jan 2023 05:35:17 GMT<br>&lt; content-type: text&#x2F;html<br>content-type: text&#x2F;html<br>&lt; content-length: 36<br>content-length: 36<br>&lt; last-modified: Tue, 17 Jan 2023 07:13:41 GMT<br>last-modified: Tue, 17 Jan 2023 07:13:41 GMT<br>&lt; etag: â€œ63c64aa5-24â€<br>etag: â€œ63c64aa5-24â€<br>&lt; accept-ranges: bytes<br>accept-ranges: bytes</li>
</ul>
<p>&lt; </p>
<ul>
<li>Connection #0 to host <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a> left intact</li>
</ul>
<p>#è®¿é—®<br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a></p>
<p>#æ›´æ”¹æµè§ˆå™¨ç‰ˆæœ¬è¿›è¡Œè®¿é—®<br>[root@internet ~]#curl -A chrome  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl -A chrome  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl -A chrome  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.203 _web02-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl -A firefox  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl -A firefox  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>[root@internet ~]#curl -A firefox  <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">http://www.mooreyxia.org</a><br>10.0.0.202 _web01-<a target="_blank" rel="noopener" href="http://www.mooreyxia.orgrdp-cookie/">www.mooreyxia.orgrdp-cookie</a> ç®—æ³•<br>â€¢ rdp-cookieå¯¹è¿œwindowsè¿œç¨‹æ¡Œé¢çš„è´Ÿè½½ï¼Œä½¿ç”¨cookieä¿æŒä¼šè¯ï¼Œé»˜è®¤æ˜¯é™æ€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡hash-typeæŒ‡å®šmap-basedå’Œconsistentï¼Œæ¥å®šä¹‰ä½¿ç”¨å–æ¨¡æ³•è¿˜æ˜¯ä¸€è‡´æ€§hashï¼Œä¸å¸¸ç”¨ã€‚<br>æ¡ˆä¾‹ï¼š<br>[root@haproxy ~]#cat &#x2F;etc&#x2F;haproxy&#x2F;conf.d&#x2F;<a target="_blank" rel="noopener" href="http://www.mooreyxia.org.cfg/">www.mooreyxia.org.cfg</a><br>listen <a target="_blank" rel="noopener" href="http://www.mooreyxia.org/">www.mooreyxia.org</a><br>    balance rdp-cookie<br>    hash-type consistent    â€“&gt; å¯è®¾ç½®åŠ¨æ€ï¼Œé»˜è®¤é™æ€<br>    bind 192.168.10.200:80<br>    server 10.0.0.202 10.0.0.202:80 weight 3 check inter 3000 fall 3 rise 5<br>    server 10.0.0.203 10.0.0.203:80 weight 1 check inter 3000 fall 3 rise 5æ€»ç»“ï¼šåç§è°ƒåº¦ç®—æ³•<br>#é™æ€<br>static-rrâ€”â€”â€”&gt;tcp&#x2F;http<br>firstâ€”â€”â€”â€”-&gt;tcp&#x2F;http<br>#åŠ¨æ€<br>roundrobinâ€”â€”â€“&gt;tcp&#x2F;http<br>leastconnâ€”â€”â€”&gt;tcp&#x2F;http<br>randomâ€”â€”â€”â€”&gt;tcp&#x2F;http<br>#ä»¥ä¸‹é™æ€å’ŒåŠ¨æ€å–å†³äºhash_typeæ˜¯å¦consistent<br>sourceâ€”â€”â€”â€”&gt;tcp&#x2F;http<br>Uriâ€”â€”â€”â€”â€”&gt;http ä¸ƒå±‚<br>url_paramâ€”â€”â€”&gt;http ä¸ƒå±‚<br>hdrâ€”â€”â€”â€”â€”&gt;http ä¸ƒå±‚<br>rdp-cookieâ€”â€”â€“&gt;tcp å››å±‚<br>#å„ç§ç®—æ³•ä½¿ç”¨åœºæ™¯<br>first #ä½¿ç”¨è¾ƒå°‘<br>static-rr #åšäº†sessionå…±äº«çš„ web é›†ç¾¤<br>roundrobin<br>random<br>leastconn #æ•°æ®åº“<br>source #åŸºäºå®¢æˆ·ç«¯å…¬ç½‘ IP çš„ä¼šè¯ä¿æŒ<br>Uriâ€”â€”â€”â€”â€”&gt;http #ç¼“å­˜æœåŠ¡å™¨ï¼ŒCDNæœåŠ¡å•†ï¼Œè“æ±›ã€ç™¾åº¦ã€é˜¿é‡Œäº‘ã€è…¾è®¯<br>url_paramâ€”â€”â€”&gt;http #å¯ä»¥å®ç°sessionä¿æŒ<br>hdr #åŸºäºå®¢æˆ·ç«¯è¯·æ±‚æŠ¥æ–‡å¤´éƒ¨åšä¸‹ä¸€æ­¥å¤„ç†<br>rdp-cookie #åŸºäºWindowsä¸»æœº,å¾ˆå°‘ä½¿ç”¨æˆ‘æ˜¯moore,å¤§å®¶ä¸€èµ·åŠ æ²¹ï¼ï¼ï¼</p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>







</html>
